<div class="auth-container">
  <div class="auth-card">
    <!-- Header -->
    <div class="auth-header">
      <h2>{{ isLoginMode() ? 'Login' : 'Register' }}</h2>
      <p>{{ isLoginMode() ? 'Welcome back!' : 'Create your account' }}</p>
    </div>

    <!-- Success Message -->
    @if (successMessage()) {
      <div class="alert alert-success">
        {{ successMessage() }}
      </div>
    }

    <!-- Error Message -->
    @if (errorMessage()) {
      <div class="alert alert-error">
        {{ errorMessage() }}
      </div>
    }

    <!-- Login Form -->
    @if (isLoginMode()) {
      <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="auth-form">
        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="Enter your email"
            [class.error]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
          />
          @if (getFieldError(loginForm, 'email')) {
            <span class="error-text">{{ getFieldError(loginForm, 'email') }}</span>
          }
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <input
            type="password"
            id="password"
            formControlName="password"
            placeholder="Enter your password"
            [class.error]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
          />
          @if (getFieldError(loginForm, 'password')) {
            <span class="error-text">{{ getFieldError(loginForm, 'password') }}</span>
          }
        </div>

        <button type="submit" class="btn btn-primary" [disabled]="loginForm.invalid || isLoading()">
          @if (isLoading()) {
            <span class="spinner"></span>
          }
          {{ isLoading() ? 'Logging in...' : 'Login' }}
        </button>
      </form>
    }

    <!-- Register Form -->
    @if (!isLoginMode()) {
      <form [formGroup]="registerForm" (ngSubmit)="onRegister()" class="auth-form">
        <div class="form-group">
          <label for="name">Full Name</label>
          <input
            type="text"
            id="name"
            formControlName="name"
            placeholder="Enter your full name"
            [class.error]="registerForm.get('name')?.invalid && registerForm.get('name')?.touched"
          />
          @if (getFieldError(registerForm, 'name')) {
            <span class="error-text">{{ getFieldError(registerForm, 'name') }}</span>
          }
        </div>

        <div class="form-group">
          <label for="reg-email">Email</label>
          <input
            type="email"
            id="reg-email"
            formControlName="email"
            placeholder="Enter your email"
            [class.error]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
          />
          @if (getFieldError(registerForm, 'email')) {
            <span class="error-text">{{ getFieldError(registerForm, 'email') }}</span>
          }
        </div>

        <div class="form-group">
          <label for="reg-password">Password</label>
          <input
            type="password"
            id="reg-password"
            formControlName="password"
            placeholder="Enter strong password"
            [class.error]="
              registerForm.get('password')?.invalid && registerForm.get('password')?.touched
            "
          />
          @if (getFieldError(registerForm, 'password')) {
            <span class="error-text">{{ getFieldError(registerForm, 'password') }}</span>
          }
        </div>

        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="registerForm.invalid || isLoading()"
        >
          @if (isLoading()) {
            <span class="spinner"></span>
          }
          {{ isLoading() ? 'Registering...' : 'Register' }}
        </button>
      </form>
    }

    <!-- Toggle between Login/Register -->
    <div class="auth-toggle">
      <p>
        {{ isLoginMode() ? "Don't have an account?" : 'Already have an account?' }}
        <button type="button" class="link-btn" (click)="toggleMode()">
          {{ isLoginMode() ? 'Register here' : 'Login here' }}
        </button>
      </p>
    </div>
  </div>
</div>
