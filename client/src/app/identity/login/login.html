<div class="auth-glass-page">
  <div class="bg-svg-container">
    <img src="/asset/typing_race_bg.svg" alt="Background" class="bg-svg-image" />
  </div>

  <div class="auth-glass-card">
    <div class="auth-header">
      <div class="logo">‚å®Ô∏è‚ö°</div>

      <h1>Typing Race</h1>
      <h2>
        {{ isLoginMode() ? 'Welcome back' : 'Create your account' }}
      </h2>
      <p>
        {{
          isLoginMode()
            ? 'Log in and continue racing'
            : 'Join the fastest typists and improve your speed!'
        }}
      </p>
    </div>

    @if (successMessage()) {
      <div class="alert success">{{ successMessage() }}</div>
    }

    @if (errorMessage()) {
      <div class="alert error">{{ errorMessage() }}</div>
    }

    @if (isLoginMode()) {
      <form [formGroup]="loginForm" (ngSubmit)="onLogin()">
        <div class="field">
          <label>Email</label>
          <input type="email" placeholder="Email address" formControlName="email" />
        </div>

        <div class="field">
          <label>Password</label>
          <input type="password" placeholder="Password" formControlName="password" />
        </div>

        <button type="submit" [disabled]="loginForm.invalid || isLoading()">
          {{ isLoading() ? 'Logging in...' : 'Log In' }}
        </button>
      </form>
    }

    @if (!isLoginMode()) {
      <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
        <div class="field">
          <label>Full Name</label>
          <input type="text" placeholder="Full Name" formControlName="name" />
        </div>

        <div class="field">
          <label>Email Address</label>
          <input type="email" placeholder="Email Address" formControlName="email" />
        </div>

        <div class="field">
          <label>Password</label>
          <div class="password-input-wrapper">
            <input
              type="password"
              placeholder="Password"
              formControlName="password"
              (input)="updatePasswordStrength($event)"
            />
            <span class="password-icon">üîí</span>
          </div>
          <div class="password-strength">
            <div class="strength-dots">
              @for (i of [1, 2, 3, 4]; track i) {
                <span [ngClass]="{ filled: i <= passwordStrength() }"></span>
              }
            </div>
          </div>
        </div>

        <button type="submit" [disabled]="registerForm.invalid || isLoading()">
          {{ isLoading() ? 'Creating...' : 'Sign Up' }}
        </button>
      </form>
    }

    <div class="auth-footer">
      <span>
        {{ isLoginMode() ? 'Don‚Äôt have an account?' : 'Already have an account?' }}
      </span>
      <button (click)="toggleMode()">
        {{ isLoginMode() ? 'Sign up' : 'Log in' }}
      </button>
    </div>
  </div>
</div>
