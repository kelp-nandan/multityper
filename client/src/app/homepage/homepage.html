<div class="homepage-container">
  <div class="bg-svg-container">
    <img src="asset/hompage.svg" alt="background" class="bg-svg-image" />
  </div>

  <div class="header-section">
    <div class="profile-badge">
      <div class="avatar">{{ (user()?.name || 'U').charAt(0).toLowerCase() }}</div>
      <div class="greeting">Hi, {{ user()?.name || 'User' }} ğŸ‘‹</div>
    </div>

    <button class="logout-btn" (click)="onLogout()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
        <polyline points="16 17 21 12 16 7"></polyline>
        <line x1="21" y1="12" x2="9" y2="12"></line>
      </svg>
      Logout
    </button>
  </div>

  <div class="main-content">
    <h1 class="main-title">Ready to race your fingers?</h1>
    <p class="subtitle">Compete in real-time typing races. Speed up. Stay accurate. Win.</p>

    <div class="action-cards">
      <div class="action-card create-card">
        <div class="card-icon">âš¡</div>
        <h3>Create a Race</h3>
        <p>Host a private typing race and invite friends.</p>
        <button class="action-btn create-btn" (click)="createRoomModal()">Create Room</button>
      </div>

      <div class="action-card join-card">
        <div class="card-icon">ğŸ®</div>
        <h3>Join a Race</h3>
        <p>Jump into an ongoing race and prove your speed.</p>
        <button class="action-btn join-btn" (click)="joinRoomModal()">Join Room</button>
      </div>
    </div>

    <div class="stats-card">
      <div class="stat-item">
        <span class="stat-icon">âš¡</span>
        <span class="stat-label">Best WPM:</span>
        <span class="stat-value">42</span>
      </div>
      <div class="stat-item">
        <span class="stat-icon">ğŸ¯</span>
        <span class="stat-label">Accuracy:</span>
        <span class="stat-value">94%</span>
      </div>
      <div class="stat-item">
        <span class="stat-icon">ğŸ†</span>
        <span class="stat-label">Wins:</span>
        <span class="stat-value">6</span>
      </div>
      <p class="stats-hint">Play your first race to unlock stats!</p>
    </div>

    <div class="quick-stats">
      <div class="quick-stat">
        <span class="icon">âš¡</span>
        <span class="value">42</span>
      </div>
      <div class="quick-stat">
        <span class="icon">ğŸ¯</span>
        <span class="value">94%</span>
      </div>
      <div class="quick-stat">
        <span class="icon">ğŸ†</span>
        <span class="value">6</span>
      </div>
    </div>
  </div>
</div>

<app-modal
  [isOpen]="showJoinModal()"
  [showFooter]="false"
  (onClose)="handleJoinClose()"
  title="Join Room"
>
  <div class="modal-content rooms-list">
    <div class="rooms-intro">Select a room to join â€” tap Join on the right.</div>

    @for (room of rooms$ | async; track trackByRoomId($index, room)) {
      <div class="room-card">
        <div class="room-info">
          <p class="room-name">{{ room.data.roomName }}</p>
          <p class="room-id">
            ID: <span>{{ room.key }}</span>
          </p>
        </div>

        <button class="room-join-btn" (click)="handleJoinRoom(room)">Join</button>
      </div>
    }
  </div>
</app-modal>

<app-modal
  [isOpen]="showCreateModal()"
  title="Create New Room"
  (onClose)="handleCreateClose()"
  (onConfirmed)="handleCreateConfirm()"
>
  <div class="modal-content create-room">
    <label for="roomName">Room name</label>
    <input
      type="text"
      id="roomName"
      placeholder="Enter your room name"
      [ngModel]="roomName()"
      (ngModelChange)="roomName.set($event)"
      class="modal-input"
    />
    <p class="hint">Give your room a fun, memorable name so friends can find it.</p>
  </div>
</app-modal>
